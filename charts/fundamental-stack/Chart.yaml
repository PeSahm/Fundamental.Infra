# =============================================================================
# Fundamental Stack - Production-Grade Helm Chart
# =============================================================================
# This chart deploys the complete Fundamental application stack:
# - ASP.NET Core Backend API
# - Angular Frontend
# - PostgreSQL Database (official image)
# - Redis Cache (official image)
#
# Follows Kubernetes 2025 Best Practices:
# - Security-first design (non-root, read-only filesystem)
# - Zero-downtime deployments (probes, PodDisruptionBudgets)
# - Network isolation (NetworkPolicies)
# - GitOps-ready (ArgoCD compatible)
# =============================================================================

apiVersion: v2
name: fundamental-stack
description: |
  A production-grade Helm chart for deploying the Fundamental application stack.
  Includes ASP.NET Core backend, Angular frontend, PostgreSQL, and Redis.

type: application

# Chart version - follows SemVer
# Increment for chart changes (templates, values structure)
version: 1.1.0

# Application version - the default app version deployed
# This can be overridden per environment in values files
appVersion: "1.0.0"

# Kubernetes version requirements (MicroK8s 1.24+)
kubeVersion: ">=1.24.0-0"

# Chart maintainers
maintainers:
  - name: Fundamental Team
    email: team@academind.ir
    url: https://academind.ir

# Keywords for chart discovery
keywords:
  - fundamental
  - dotnet
  - angular
  - fullstack
  - postgresql
  - redis
  - microservices

# Home and source URLs
home: https://academind.ir
sources:
  - https://github.com/PeSahm/Fundamental.Infra
  - https://github.com/PeSahm/Fundamental.Backend
  - https://github.com/PeSahm/Fundamental.FrontEnd

# Chart icon (optional)
icon: https://academind.ir/assets/logo.png

# Annotations for additional metadata
annotations:
  # ArgoCD annotations
  argocd.argoproj.io/sync-wave: "0"
  
  # Artifact Hub annotations (if publishing)
  artifacthub.io/license: MIT
  artifacthub.io/category: integration-delivery
  artifacthub.io/signKey: |
    fingerprint: ""
    url: ""

# =============================================================================
# No external dependencies - using official Docker images directly
# =============================================================================
# PostgreSQL: docker.io/postgres:17-alpine
# Redis: docker.io/redis:7-alpine
# =============================================================================
